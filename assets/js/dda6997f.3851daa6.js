"use strict";(self.webpackChunkctrlpanel=self.webpackChunkctrlpanel||[]).push([[6359],{2939:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"guides/migration","title":"Migration","description":"Let\'s talk about migrating your panel between servers. It doesn\'t matter whether you\'re switching hosting providers or just moving from localhost to your own custom domain.","source":"@site/docs/guides/migration.mdx","sourceDirName":"guides","slug":"/guides/migration","permalink":"/docs/guides/migration","draft":false,"unlisted":false,"editUrl":"https://github.com/Ctrlpanel-gg/docs/tree/main/docs/guides/migration.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"defaultSidebar","previous":{"title":"Guides","permalink":"/docs/category/guides"},"next":{"title":"Backup & Restore","permalink":"/docs/guides/backup"}}');var i=t(4848),o=t(8453);const r={sidebar_position:1},s="Migration",l={},d=[{value:"Backup your database and .env file",id:"backup-your-database-and-env-file",level:2},{value:"Preparing new location",id:"preparing-new-location",level:2},{value:"Database migration",id:"database-migration",level:2},{value:"Lock installer",id:"lock-installer",level:2},{value:"Finish",id:"finish",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"migration",children:"Migration"})}),"\n",(0,i.jsxs)(n.p,{children:["Let's talk about migrating your panel between servers. It doesn't matter whether you're switching hosting providers or just moving from ",(0,i.jsx)(n.code,{children:"localhost"})," to your own custom domain."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"During migration, do not install a newer or older version of CtrlPanel on the new server. Always install the exact same version as your current one. Otherwise, you may run into compatibility issues."})}),"\n",(0,i.jsx)(n.h2,{id:"backup-your-database-and-env-file",children:"Backup your database and .env file"}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsxs)(n.p,{children:["Never lose your ",(0,i.jsx)(n.code,{children:".env"})," file, more specifically, your ",(0,i.jsx)(n.code,{children:"APP_KEY"}),". Without it, you'll lose almost all data that Laravel encrypts in the database using this key."]})}),"\n",(0,i.jsxs)(n.p,{children:["We have a separate guide on how to back up your database and where to find the ",(0,i.jsx)(n.code,{children:".env"})," file. You can find it ",(0,i.jsx)(n.a,{href:"/docs/guides/backup?db-state=fresh#how-to-create-database-backup",children:"here"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["That's all we need - just SQL file of your database, and ",(0,i.jsx)(n.code,{children:".env"})," file with your ",(0,i.jsx)(n.code,{children:"APP_KEY"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"preparing-new-location",children:"Preparing new location"}),"\n",(0,i.jsxs)(n.p,{children:["Follow the ",(0,i.jsx)(n.a,{href:"/docs/getting-started/install",children:"default installation guide"}),' and complete all steps up to the final one - "Navigate to the installer". Once you reach that point, come back here.']}),"\n",(0,i.jsx)(n.h2,{id:"database-migration",children:"Database migration"}),"\n",(0,i.jsxs)(n.p,{children:["Now we need to import the data from your ",(0,i.jsx)(n.code,{children:".sql"})," file into the database on your new server. You can follow ",(0,i.jsx)(n.a,{href:"/docs/guides/backup?db-state=fresh#how-to-restore-database-backup",children:"this"})," guide to do it."]}),"\n",(0,i.jsxs)(n.p,{children:["After that, place your old ",(0,i.jsx)(n.code,{children:".env"})," file into the CtrlPanel root directory (",(0,i.jsx)(n.code,{children:"/var/www/ctrlpanel/"}),").",(0,i.jsx)(n.br,{}),"\n","Update the database password or other values if needed, such as ",(0,i.jsx)(n.code,{children:"APP_URL"})," or ",(0,i.jsx)(n.code,{children:"APP_NAME"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"lock-installer",children:"Lock installer"}),"\n",(0,i.jsxs)(n.p,{children:["Now create an empty ",(0,i.jsx)(n.code,{children:"install.lock"})," file in the CtrlPanel root directory (",(0,i.jsx)(n.code,{children:"/var/www/ctrlpanel/"}),") to disable installer since we don't need it anymore."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"touch /var/www/ctrlpanel/install.lock\n"})}),"\n",(0,i.jsx)(n.h2,{id:"finish",children:"Finish"}),"\n",(0,i.jsx)(n.p,{children:"Congratulations! You can now try opening your CtrlPanel page in the browser and check if your data was successfully migrated."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var a=t(6540);const i={},o=a.createContext(i);function r(e){const n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);