"use strict";(self.webpackChunkctrlpanel=self.webpackChunkctrlpanel||[]).push([[895],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),u=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||p[m]||r;return n?o.createElement(h,i(i({ref:t},c),{},{components:n})):o.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var u=2;u<r;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3901:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294),a=n(3743);const r="tableOfContentsInline_prmo";function i(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:i}=e;return o.createElement("div",{className:r},o.createElement(a.Z,{toc:t,minHeadingLevel:n,maxHeadingLevel:i,className:"table-of-contents",linkClassName:null}))}},3743:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(3117),a=n(7294),r=n(6668);function i(e){const t=e.map((e=>({...e,parentIndex:-1,children:[]}))),n=Array(7).fill(-1);t.forEach(((e,t)=>{const o=n.slice(2,e.level);e.parentIndex=Math.max(...o),n[e.level]=t}));const o=[];return t.forEach((e=>{const{parentIndex:n,...a}=e;n>=0?t[n].children.push(a):o.push(a)})),o}function l(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:o}=e;return t.flatMap((e=>{const t=l({toc:e.children,minHeadingLevel:n,maxHeadingLevel:o});return function(e){return e.level>=n&&e.level<=o}(e)?[{...e,children:t}]:t}))}function s(e){const t=e.getBoundingClientRect();return t.top===t.bottom?s(e.parentNode):t}function u(e,t){let{anchorTopOffset:n}=t;const o=e.find((e=>s(e).top>=n));if(o){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(s(o))?o:e[e.indexOf(o)-1]??null}return e[e.length-1]??null}function c(){const e=(0,a.useRef)(0),{navbar:{hideOnScroll:t}}=(0,r.L)();return(0,a.useEffect)((()=>{e.current=t?0:document.querySelector(".navbar").clientHeight}),[t]),e}function p(e){const t=(0,a.useRef)(void 0),n=c();(0,a.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:o,linkActiveClassName:a,minHeadingLevel:r,maxHeadingLevel:i}=e;function l(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(o),l=function(e){let{minHeadingLevel:t,maxHeadingLevel:n}=e;const o=[];for(let a=t;a<=n;a+=1)o.push(`h${a}.anchor`);return Array.from(document.querySelectorAll(o.join()))}({minHeadingLevel:r,maxHeadingLevel:i}),s=u(l,{anchorTopOffset:n.current}),c=e.find((e=>s&&s.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,n){n?(t.current&&t.current!==e&&t.current.classList.remove(a),e.classList.add(a),t.current=e):e.classList.remove(a)}(e,e===c)}))}return document.addEventListener("scroll",l),document.addEventListener("resize",l),l(),()=>{document.removeEventListener("scroll",l),document.removeEventListener("resize",l)}}),[e,n])}function d(e){let{toc:t,className:n,linkClassName:o,isChild:r}=e;return t.length?a.createElement("ul",{className:r?void 0:n},t.map((e=>a.createElement("li",{key:e.id},a.createElement("a",{href:`#${e.id}`,className:o??void 0,dangerouslySetInnerHTML:{__html:e.value}}),a.createElement(d,{isChild:!0,toc:e.children,className:n,linkClassName:o}))))):null}const m=a.memo(d);function h(e){let{toc:t,className:n="table-of-contents table-of-contents__left-border",linkClassName:s="table-of-contents__link",linkActiveClassName:u,minHeadingLevel:c,maxHeadingLevel:d,...h}=e;const f=(0,r.L)(),y=c??f.tableOfContents.minHeadingLevel,g=d??f.tableOfContents.maxHeadingLevel,v=function(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:o}=e;return(0,a.useMemo)((()=>l({toc:i(t),minHeadingLevel:n,maxHeadingLevel:o})),[t,n,o])}({toc:t,minHeadingLevel:y,maxHeadingLevel:g});return p((0,a.useMemo)((()=>{if(s&&u)return{linkClassName:s,linkActiveClassName:u,minHeadingLevel:y,maxHeadingLevel:g}}),[s,u,y,g])),a.createElement(m,(0,o.Z)({toc:v,className:n,linkClassName:s},h))}},2632:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=n(3117),a=(n(7294),n(3905)),r=n(3901);const i={sidebar_position:3},l="Additional Configuration",s={unversionedId:"Installation/additional-configuration",id:"version-0.9.1/Installation/additional-configuration",title:"Additional Configuration",description:"The StripeWebhook URL has been changed in v0.9 due to the new extension support. Read the Stripe section below, it contains the new URL.",source:"@site/versioned_docs/version-0.9.1/Installation/additional-configuration.md",sourceDirName:"Installation",slug:"/Installation/additional-configuration",permalink:"/docs/0.9.1/Installation/additional-configuration",draft:!1,editUrl:"https://github.com/Ctrlpanel-gg/panel/versioned_docs/version-0.9.1/Installation/additional-configuration.md",tags:[],version:"0.9.1",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"version-0.9.1/tutorialSidebar",previous:{title:"Getting started",permalink:"/docs/0.9.1/Installation/getting-started"},next:{title:"Troubleshooting",permalink:"/docs/0.9.1/Installation/troubleshooting"}},u={},c=[{value:"Misc Configuration",id:"misc-configuration",level:2},{value:"Setup Auth",id:"setup-auth",level:3},{value:"Setup Discord OAuth2",id:"setup-discord-oauth2",level:3},{value:"reCAPTCHA v2",id:"recaptcha-v2",level:3},{value:"Manual Mail Configuration",id:"manual-mail-configuration",level:3},{value:"Payment Configuration",id:"payment-configuration",level:3},{value:"PayPal",id:"paypal",level:4},{value:"Stripe",id:"stripe",level:4}],p={toc:c};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"additional-configuration"},"Additional Configuration"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"The StripeWebhook URL has been changed in ",(0,a.kt)("inlineCode",{parentName:"p"},"v0.9")," due to the new extension support. Read the Stripe section below, it contains the new URL.")),(0,a.kt)(r.Z,{toc:c,mdxType:"TOCInline"}),(0,a.kt)("h2",{id:"misc-configuration"},"Misc Configuration"),(0,a.kt)("h3",{id:"setup-auth"},"Setup Auth"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"http://faq.demostoreprestashop.com/faq.php?fid=133&pid=41"},"How")," to get CLIENT_ID and CLIENT_SECRET ",(0,a.kt)("br",null),"\nfor the redirect URI, you have to use YOUR_WEBSITE_URL + /auth/callback (example: ",(0,a.kt)("a",{parentName:"p",href:"https://demo.ctrlpanel.gg/auth/callback"},"https://demo.ctrlpanel.gg/auth/callback"),")"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Adding the Discord Bot"),(0,a.kt)("br",null),"\nIf you would like to automatically force new users to join your Discord server after they have verified, you will need to set up a Discord bot. This can be an already existing Discord bot in your server. If your bot isn't in the server yet, add it by using this: ",(0,a.kt)("inlineCode",{parentName:"p"},"https://discord.com/api/oauth2/authorize?client_id=<CLIENT_ID_HERE>&permissions=8&scope=bot"),". Replace the ",(0,a.kt)("inlineCode",{parentName:"p"},"<CLIENT_ID_HERE>")," with your bots client ID."),(0,a.kt)("h3",{id:"setup-discord-oauth2"},"Setup Discord OAuth2"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Head to ",(0,a.kt)("inlineCode",{parentName:"li"},"https://YOUR_DOMAIN_HERE/admin/settings#misc")," (change ",(0,a.kt)("inlineCode",{parentName:"li"},"YOUR_DOMAIN_HERE")," to your dashboard domain)"),(0,a.kt)("li",{parentName:"ol"},"On the Discord section put in the following:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Your bot's client ID"),(0,a.kt)("li",{parentName:"ul"},"Your bot's client secret"),(0,a.kt)("li",{parentName:"ul"},"Your bot's token"),(0,a.kt)("li",{parentName:"ul"},"Your Discord Guild ID (optional, but useful if you want the user to be added to your server)"),(0,a.kt)("li",{parentName:"ul"},"Your Discord Invite (optional, but useful if you want the user to be added to your server)"),(0,a.kt)("li",{parentName:"ul"},"Your Discord Role ID (optional, but useful if you want the verified user to recieve a role on your server after verifying)")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},'Then press the "Submit" button to save.')),(0,a.kt)("p",null,"That's it! The Dashboard can now use your bot to make API calls to Discord to place new users into your Discord server. Your bot will not come online as we only use it to make API calls when someone verifies, you can still use your bot as you normally would as it won't affect the bot itself."),(0,a.kt)("h3",{id:"recaptcha-v2"},"reCAPTCHA v2"),(0,a.kt)("p",null,"Go to ",(0,a.kt)("inlineCode",{parentName:"p"},"https://<your.ctrlpanel.gg>/admin/settings#misc")),(0,a.kt)("p",null,"Ctrlpanel uses visible reCAPTCHA to secure the login page from brute-force attacks. If the login attempt is considered suspicious, users may be required to perform a reCAPTCHA challenge."),(0,a.kt)("p",null,"You can generate your own keys in the ",(0,a.kt)("a",{parentName:"p",href:"https://www.google.com/recaptcha/admin/create"},"admin console")),(0,a.kt)("p",null,"Go to the Admin Misc settings and change the ",(0,a.kt)("inlineCode",{parentName:"p"},"reCAPTCHA Site-Key")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"reCAPTCHA Secret-Key"),". Once you've updated it, press ",(0,a.kt)("inlineCode",{parentName:"p"},"Submit"),". If it works correctly then below the reCAPTCHA settings under ",(0,a.kt)("inlineCode",{parentName:"p"},"Your reCAPTCHA"),", you should be able to see the reCAPTCHA without the ",(0,a.kt)("inlineCode",{parentName:"p"},"This reCAPTCHA is for testing purposes only. Please report to the site adminif you are seeing this"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"FAQ for reCAPTCHA"),(0,a.kt)("br",null)),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Q:")," It says ",(0,a.kt)("inlineCode",{parentName:"p"},"ERROR for site owner: Invalid site key")," ",(0,a.kt)("br",null),"\n",(0,a.kt)("strong",{parentName:"p"},"A:")," This means that you put in the incorrect site key. Double check you're using v2 and ",(0,a.kt)("inlineCode",{parentName:"p"},"I'm not a robot")," checkbox on the reCAPTCHA create page which is found ",(0,a.kt)("a",{parentName:"p",href:"https://www.google.com/recaptcha/admin/create"},"here")),(0,a.kt)("h3",{id:"manual-mail-configuration"},"Manual Mail Configuration"),(0,a.kt)("p",null,"To send out notifications and mails, you will need to configure your mail variables correctly.\nYou can use a free mail server; for example, from ",(0,a.kt)("a",{parentName:"p",href:"https://www.mailjet.com/"},"Mailjet"),". You can also install your own mail server using, for example, ",(0,a.kt)("a",{parentName:"p",href:"https://mailcow.email/"},"Mailcow")),(0,a.kt)("p",null,"Go to ",(0,a.kt)("inlineCode",{parentName:"p"},"https://<your.ctrlpanel.gg>/admin/settings#misc")," and enter your mail credentials that you recieved from whichever provider."),(0,a.kt)("p",null,"Once set run these 2 commands to ensure that emails work:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"php /var/www/controlpanel/artisan config:clear\nphp /var/www/controlpanel/artisan queue:restart\n")),(0,a.kt)("p",null,"To test the mail configuration, you can go to the Users tab and click the notify button top right.\nSelect a user and choose to send via email, write some text and click submit. It may take a few minutes until it's sent."),(0,a.kt)("h3",{id:"payment-configuration"},"Payment Configuration"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"You are able to use both Paypal and Stripe as a payment option. If you want to add a different form of payment that isn't covered by Stripe or Paypal you have to add it yourself.")),(0,a.kt)("h4",{id:"paypal"},"PayPal"),(0,a.kt)("p",null,"To use the PayPal payment gateway, you have to set up an application on Paypal Developer Dashboard which you can find ",(0,a.kt)("a",{parentName:"p",href:"https://developer.paypal.com/developer/accounts/"},"here"),"."),(0,a.kt)("p",null,'To setup Paypal payments, go to "My Apps & Credentials" and choose either "Live" for production use or "Sandbox" for testing use of PayPal.'),(0,a.kt)("p",null,"Create a app, give it any name you want, and copy the Client ID and the Secret. After go back to your Ctrlpanel setup and paste in the credientials into the Paypal section. If you have the Live mode on, put the Client ID and Secret in the first 2 boxes. If you have it on Sandbox, put it in the last 2 boxes."),(0,a.kt)("p",null,'The only "App Feature Option" that Ctrlpanel needs is "Accept Payments".'),(0,a.kt)("h4",{id:"stripe"},"Stripe"),(0,a.kt)("p",null,'To use Stripe as your payment gateway, you first have to setup a "company" on Stripe\'s dashboard which you can find ',(0,a.kt)("a",{parentName:"p",href:"https://dashboard.stripe.com/account/onboarding/business-structure"},"here")),(0,a.kt)("p",null,"To setup Stripe, go to the Developer page and click on API Keys. You only need the Secret key in order to use Stripe as your payment gateway. Once you have the secret key go to your Ctrlpanel setup and paste the secret into the ",(0,a.kt)("inlineCode",{parentName:"p"},"Stripe Secret Key")," section."),(0,a.kt)("p",null,"Now, you will need to setup a Stripe Webhook in order to accept payments that are not 100% instantly confirmed by stripe (Klarna, Bank-Transfer etc.).\nTo do so, click on Webhooks and add an endpoint.\nThe endpoint route would look something like this: ",(0,a.kt)("inlineCode",{parentName:"p"},"https://<your.ctrlpanel.gg>/extensions/payment/StripeWebhooks"),". Change the ",(0,a.kt)("inlineCode",{parentName:"p"},"<your.ctrlpanel.gg>")," to your Ctrlpanel setup link.\nChoose the ",(0,a.kt)("inlineCode",{parentName:"p"},"payment_intent.succeded")," event to be sent to your WebhookRoute.\nAfter the webhook creation, you need to get the endpoint secret and copy paste it to your Ctrlpanel payment settings. The endpoint secret can be found in the Webhook Overview page."),(0,a.kt)("p",null,"In your Ctrlpanel setup, you need to provide a comma separated list of payment methods you want to support via Stripe. For example, ",(0,a.kt)("inlineCode",{parentName:"p"},"card,sepa_debit"),". This includes both card and SEPA debit cards that can be used to pay.\nTo see the list of avaliable payment options with Stripe, read their documentation which can be found ",(0,a.kt)("a",{parentName:"p",href:"https://docs.stripe.com/payments/payment-methods/payment-method-support"},"here"),"."),(0,a.kt)("p",null,"Just like Paypal, you can change it from Live to Sandbox and vice-versa in case you want to test to make sure that your payments are working correctly."),(0,a.kt)("p",null,"Did something go wrong for you? We hope not, however it's very possible. If you need support, feel free to create a support thread on our ",(0,a.kt)("a",{parentName:"p",href:"https://discord.gg/4Y6HjD2uyU"},"Discord"),"."))}d.isMDXComponent=!0}}]);