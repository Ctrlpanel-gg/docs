"use strict";(self.webpackChunkctrlpanel=self.webpackChunkctrlpanel||[]).push([[1567],{867:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>d,default:()=>g,frontMatter:()=>c,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"Installation/getting-started","title":"Getting started","description":"It is recommended that you have some sort of Linux and MariaDB experience before installing this.","source":"@site/versioned_docs/version-1.0.x/Installation/getting-started.md","sourceDirName":"Installation","slug":"/Installation/getting-started","permalink":"/docs/1.0.x/Installation/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/Ctrlpanel-gg/docs/tree/main/versioned_docs/version-1.0.x/Installation/getting-started.md","tags":[],"version":"1.0.x","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/docs/1.0.x/"},"next":{"title":"Additional Configuration","permalink":"/docs/1.0.x/Installation/additional-configuration"}}');var t=s(4848),i=s(8453),r=s(4252),o=s(1470),l=s(9365);const c={sidebar_position:1},d="Getting started",h={},p=[{value:"Dependencies",id:"dependencies",level:2},{value:"Example Dependency Installation",id:"example-dependency-installation",level:3},{value:"Extra Dependency Used on this Dashboard",id:"extra-dependency-used-on-this-dashboard",level:3},{value:"Installing Composer",id:"installing-composer",level:3},{value:"Download Files",id:"download-files",level:2},{value:"Database Setup",id:"database-setup",level:2},{value:"Installing \u0421omposer Packages",id:"installing-\u0441omposer-packages",level:2},{value:"Creating a Storage Symlink",id:"creating-a-storage-symlink",level:2},{value:"Web Server Configuration",id:"web-server-configuration",level:2},{value:"Setting up the Web Server",id:"setting-up-the-web-server",level:3},{value:"Set Permissions",id:"set-permissions",level:3},{value:"Queue Listeners",id:"queue-listeners",level:2},{value:"Crontab Configuration",id:"crontab-configuration",level:3},{value:"Create Queue Worker",id:"create-queue-worker",level:3},{value:"Navigate to the installer",id:"navigate-to-the-installer",level:4}];function u(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"getting-started",children:"Getting started"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"It is recommended that you have some sort of Linux and MariaDB experience before installing this.\nThis guide requires you to already have a working pterodactyl installation."})}),"\n","\n",(0,t.jsx)(r.A,{toc:p}),"\n",(0,t.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["PHP ",(0,t.jsx)(n.code,{children:"8.2"}),", ",(0,t.jsx)(n.code,{children:"8.3"})," (recommended) or ",(0,t.jsx)(n.code,{children:"8.4"})," with the following extensions: ",(0,t.jsx)(n.code,{children:"cli"}),", ",(0,t.jsx)(n.code,{children:"openssl"}),", ",(0,t.jsx)(n.code,{children:"gd"}),", ",(0,t.jsx)(n.code,{children:"mysql"}),", ",(0,t.jsx)(n.code,{children:"PDO"}),", ",(0,t.jsx)(n.code,{children:"mbstring"}),", ",(0,t.jsx)(n.code,{children:"tokenizer"}),", ",(0,t.jsx)(n.code,{children:"bcmath"}),", ",(0,t.jsx)(n.code,{children:"xml"})," or ",(0,t.jsx)(n.code,{children:"dom"}),", ",(0,t.jsx)(n.code,{children:"curl"}),", ",(0,t.jsx)(n.code,{children:"zip"}),", ",(0,t.jsx)(n.code,{children:"redis"}),", ",(0,t.jsx)(n.code,{children:"intl"})," and ",(0,t.jsx)(n.code,{children:"fpm"})," if you are planning to use NGINX."]}),"\n",(0,t.jsxs)(n.li,{children:["MySQL ",(0,t.jsx)(n.code,{children:"5.7.22"})," or higher (MySQL ",(0,t.jsx)(n.code,{children:"8"})," recommended) ",(0,t.jsx)(n.strong,{children:"or"})," MariaDB ",(0,t.jsx)(n.code,{children:"10.2"})," or higher."]}),"\n",(0,t.jsxs)(n.li,{children:["Redis (",(0,t.jsx)(n.code,{children:"redis-server"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"A web server (Apache, NGINX, etc.)"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"curl"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"git"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"composer"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-dependency-installation",children:"Example Dependency Installation"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"If you already have Pterodactyl installed, please check that you also install PHP 8.3!"})}),"\n",(0,t.jsx)(n.p,{children:"The commands below are simply an example of how you might install these dependencies. Please consult with your\noperating system's package manager to determine the correct packages to install."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Add "add-apt-repository" command\napt -y install software-properties-common curl apt-transport-https ca-certificates gnupg\n\n# Add additional repositories for PHP (Ubuntu 20.04 and Ubuntu 22.04)\nLC_ALL=C.UTF-8 add-apt-repository -y ppa:ondrej/php\n\n# Add Redis official APT repository\ncurl -fsSL https://packages.redis.io/gpg | sudo gpg --dearmor -o /usr/share/keyrings/redis-archive-keyring.gpg\necho "deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/redis.list\n\n# MariaDB repo setup script (Ubuntu 20.04)\ncurl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash\n\n# Update repositories list\napt update\n\n# Install Dependencies\napt -y install php8.3 php8.3-{common,cli,gd,mysql,mbstring,bcmath,xml,fpm,curl,zip} mariadb-server nginx git redis-server\n'})}),"\n",(0,t.jsx)(n.p,{children:"If you are using redis for your system, you will want to make sure to enable that it will start on boot. You can do that by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl enable --now redis-server\n"})}),"\n",(0,t.jsx)(n.h3,{id:"extra-dependency-used-on-this-dashboard",children:"Extra Dependency Used on this Dashboard"}),"\n",(0,t.jsx)(n.p,{children:"You need to install this, use the appropriate PHP version (php -v)\nExtra dependency used for handling currency's"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"apt -y install php8.3-{intl,redis}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"installing-composer",children:"Installing Composer"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"If you already have Pterodactyl installed, you can skip this step!"})}),"\n",(0,t.jsx)(n.p,{children:"Composer is a dependency manager for PHP that allows us to ship everything you'll need code wise to operate the Panel. You'll\nneed composer installed before continuing in this process."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer\n"})}),"\n",(0,t.jsx)(n.h2,{id:"download-files",children:"Download Files"}),"\n",(0,t.jsx)(n.p,{children:"The first step in this process is to create the folder where the panel will live and then move ourselves into that\nnewly created folder. Below is an example of how to perform this operation."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p /var/www/ctrlpanel && cd /var/www/ctrlpanel\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone -b 1.0.8 https://github.com/Ctrlpanel-gg/panel.git ./\n"})}),"\n",(0,t.jsx)(n.h2,{id:"database-setup",children:"Database Setup"}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"You will need a database setup and a database user with the correct permissions created for that database before\ncontinuing any further."})}),"\n",(0,t.jsx)(n.p,{children:"To make a database and database user, you can follow this guide.\nThis is for MariaDB. Please change the USE_YOUR_OWN_PASSWORD part to your password. Also, 127.0.0.1 is for localhost. Please have basic knowledge of Linux before attempting this. Use at your own responsibility."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"# Enter to MySQL shell\nmysql -u root -p\n\n# Enter the following SQL commands\nCREATE USER 'ctrlpaneluser'@'127.0.0.1' IDENTIFIED BY 'USE_YOUR_OWN_PASSWORD';\nCREATE DATABASE ctrlpanel;\nGRANT ALL PRIVILEGES ON ctrlpanel.* TO 'ctrlpaneluser'@'127.0.0.1';\nFLUSH PRIVILEGES;\nEXIT;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"installing-\u0441omposer-packages",children:"Installing \u0421omposer Packages"}),"\n",(0,t.jsx)(n.p,{children:"First, we will have to install all composer packages.\nFor this, run the following command"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"COMPOSER_ALLOW_SUPERUSER=1 composer install --no-dev --optimize-autoloader\n"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-a-storage-symlink",children:"Creating a Storage Symlink"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["CtrlPanel requires a symbolic link to be created between the ",(0,t.jsx)(n.code,{children:"storage/app/public"})," directory and the ",(0,t.jsx)(n.code,{children:"public/storage"})," directory to properly serve uploaded files."]})}),"\n",(0,t.jsx)(n.p,{children:"To create this symlink, run the following command in the root of your CtrlPanel:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"php artisan storage:link\n"})}),"\n",(0,t.jsx)(n.h2,{id:"web-server-configuration",children:"Web Server Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["This is a basic NGINX configuration. Please replace any ",(0,t.jsx)(n.code,{children:"<domain>"})," placeholders with your domain name being used. Since NGINX is being used, we will put our configuration (",(0,t.jsx)(n.code,{children:"ctrlpanel.conf"}),") in ",(0,t.jsx)(n.code,{children:"/etc/nginx/sites-available/"}),", or \u2014 if on CentOS, ",(0,t.jsx)(n.code,{children:"/etc/nginx/conf.d/."})]}),"\n",(0,t.jsx)(n.h3,{id:"setting-up-the-web-server",children:"Setting up the Web Server"}),"\n","\n",(0,t.jsxs)(o.A,{children:[(0,t.jsxs)(l.A,{value:"nginx-ssl",label:"Nginx With SSL",default:!0,children:[(0,t.jsx)(n.p,{children:"Before we touch anything with NGINX, we first have to generate our SSL certificates. Make sure your domain you're using for your Ctrlpanel setup has a A record pointed at your IPv4 for your machine and is not proxied. Run the following commands to start the installation for SSL."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install certbot\nsudo apt install python3-certbot-nginx\n"})}),(0,t.jsxs)(n.p,{children:["Once the installation is complete, you now need to generate the SSL certificates. To do so, run the following command below. Replace any ",(0,t.jsx)(n.code,{children:"YOUR.DOMAIN.HERE"})," placeholders with the domain you're using for your Ctrlpanel setup."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"certbot certonly --nginx -d YOUR.DOMAIN.HERE\n"})}),(0,t.jsxs)(n.p,{children:["It will save all certificates to ",(0,t.jsx)(n.code,{children:"/etc/letsencrypt/live/YOUR.DOMAIN.HERE/"}),"."]}),(0,t.jsx)(n.p,{children:"Now that SSL is ready to be used, let's setup NGINX. To do so, run the following command below to get rid of NGINX's default configuration and to avoid any other errors."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"rm /etc/nginx/sites-enabled/default\n"})}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," If you see the error that there is no such file, then most likely you have already deleted it when installing Pterodactyl"]}),"\n"]}),(0,t.jsx)(n.p,{children:"Once done, we now have to open the NGINX configuration file. This depends on your OS."}),(0,t.jsx)(n.p,{children:"Debian/Ubuntu Based OSes:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nano /etc/nginx/sites-available/ctrlpanel.conf\n"})}),(0,t.jsx)(n.p,{children:"RHEL, CentOS, Rocky Linux, or AlmaLinux based OSes:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nano /etc/nginx/conf.d/ctrlpanel.conf\n"})}),(0,t.jsxs)(n.p,{children:["There, you want to paste in the configuration which is stated below. Be sure to change any ",(0,t.jsx)(n.code,{children:"YOUR.DOMAIN.HERE"})," placeholders with your Ctrlpanel setup."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-conf",children:'server {\n    # Replace YOUR.DOMAIN.HERE with your domain.\n    listen 80;\n    server_name YOUR.DOMAIN.HERE;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    # Replace YOUR.DOMAIN.HERE with your domain.\n    listen 443 ssl http2;\n    server_name YOUR.DOMAIN.HERE;\n\n    root /var/www/ctrlpanel/public;\n    index index.php;\n\n    access_log /var/log/nginx/ctrlpanel.app-access.log;\n    error_log  /var/log/nginx/ctrlpanel.app-error.log error;\n\n    # Allow large upload sizes\n    client_max_body_size 100m;\n    client_body_timeout 120s;\n\n    sendfile off;\n\n    # SSL Configuration - Replace any YOUR.DOMAIN.HERE with the domain you\'re using for your Ctrlpanel setup.\n    ssl_certificate /etc/letsencrypt/live/YOUR.DOMAIN.HERE/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/YOUR.DOMAIN.HERE/privkey.pem;\n    ssl_session_cache shared:SSL:10m;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers "ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384";\n    ssl_prefer_server_ciphers on;\n\n    # See https://hstspreload.org/ before uncommenting the line below.\n    # add_header Strict-Transport-Security "max-age=15768000; preload;";\n    add_header X-Content-Type-Options nosniff;\n    add_header X-XSS-Protection "1; mode=block";\n    add_header X-Robots-Tag none;\n    add_header Content-Security-Policy "frame-ancestors \'self\'";\n    add_header X-Frame-Options DENY;\n    add_header Referrer-Policy same-origin;\n\n    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    location ~ \\.php$ {\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass unix:/run/php/php8.3-fpm.sock;\n        fastcgi_index index.php;\n        include fastcgi_params;\n        fastcgi_param PHP_VALUE "upload_max_filesize = 100M \\n post_max_size=100M";\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_param HTTP_PROXY "";\n        fastcgi_intercept_errors off;\n        fastcgi_buffer_size 16k;\n        fastcgi_buffers 4 16k;\n        fastcgi_connect_timeout 300;\n        fastcgi_send_timeout 300;\n        fastcgi_read_timeout 300;\n        include /etc/nginx/fastcgi_params;\n    }\n\n    location ~ /\\.ht {\n        deny all;\n    }\n}\n'})}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)("font",{size:"5",children:"Enable Configuration"})})}),(0,t.jsx)(n.p,{children:"The last step is to enable the NGINX configuration. To do that, we have to restart it."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# You do not need to symlink this file if you are using CentOS.\nsudo ln -s /etc/nginx/sites-available/ctrlpanel.conf /etc/nginx/sites-enabled/ctrlpanel.conf\n\n# Check for nginx errors\nsudo nginx -t\n\n# You need to restart nginx regardless of OS. only do this you haven't received any errors\nsystemctl restart nginx\n"})})]}),(0,t.jsxs)(l.A,{value:"nginx-nossl",label:"Nginx Without SSL",children:[(0,t.jsx)(n.p,{children:"Before we setup the configuration, we must delete NGINX's example configuration. To do so, run the following command below."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"rm /etc/nginx/sites-enabled/default\n"})}),(0,t.jsx)(n.p,{children:"Once done, we now have to open the NGINX configuration file. This depends on your OS."}),(0,t.jsx)(n.p,{children:"Debian/Ubuntu Based OSes:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nano /etc/nginx/sites-available/ctrlpanel.conf\n"})}),(0,t.jsx)(n.p,{children:"RHEL, CentOS, Rocky Linux, or AlmaLinux based OSes:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nano /etc/nginx/conf.d/ctrlpanel.conf\n"})}),(0,t.jsxs)(n.p,{children:["There, you want to paste in the configuration which is stated below. Be sure to change any ",(0,t.jsx)(n.code,{children:"YOUR.DOMAIN.HERE"})," placeholders with your Ctrlpanel setup."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-conf",children:'server {\n     # Replace YOUR.DOMAIN.HERE with your domain.\n     listen 80;\n     server_name YOUR.DOMAIN.HERE;\n \n     root /var/www/ctrlpanel/public;\n     index index.html index.htm index.php;\n     charset utf-8;\n \n     location / {\n         try_files $uri $uri/ /index.php?$query_string;\n     }\n \n     location = /favicon.ico { access_log off; log_not_found off; }\n     location = /robots.txt  { access_log off; log_not_found off; }\n \n     access_log off;\n     error_log  /var/log/nginx/ctrlpanel.app-error.log error;\n \n     # Allow larger upload sizes\n     client_max_body_size 100m;\n     client_body_timeout 120s;\n \n     sendfile off;\n \n     location ~ \\.php$ {\n         fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n         fastcgi_pass unix:/run/php/php8.3-fpm.sock;\n         fastcgi_index index.php;\n         include fastcgi_params;\n         fastcgi_param PHP_VALUE "upload_max_filesize = 100M \\n post_max_size=100M";\n         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n         fastcgi_param HTTP_PROXY "";\n         fastcgi_intercept_errors off;\n         fastcgi_buffer_size 16k;\n         fastcgi_buffers 4 16k;\n         fastcgi_connect_timeout 300;\n         fastcgi_send_timeout 300;\n         fastcgi_read_timeout 300;\n     }\n \n     location ~ /\\.ht {\n         deny all;\n     }\n }\n'})}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)("font",{size:"5",children:"Enable Configuration"})})}),(0,t.jsx)(n.p,{children:"The last step is to enable the NGINX configuration. To do that, we have to restart it."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# You do not need to symlink this file if you are using CentOS.\nsudo ln -s /etc/nginx/sites-available/ctrlpanel.conf /etc/nginx/sites-enabled/ctrlpanel.conf\n\n# Check for nginx errors\nsudo nginx -t\n\n# You need to restart nginx regardless of OS. only do this you haven't received any errors\nsystemctl restart nginx\n"})})]}),(0,t.jsxs)(l.A,{value:"apache-ssl",label:"Apache With SSL",children:[(0,t.jsx)(n.p,{children:"Before we setup the configuration, we have to delete Apache's default configuration. Run the command below to delete it."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"a2dissite 000-default.conf\n"})}),(0,t.jsx)(n.p,{children:"Once done, we now have to open the NGINX configuration file. This depends on your OS."}),(0,t.jsx)(n.p,{children:"Debian/Ubuntu Based OSes:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nano /etc/apache2/sites-available/ctrlpanel.conf\n"})}),(0,t.jsx)(n.p,{children:"RHEL, CentOS, Rocky Linux, or AlmaLinux based OSes:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nano /etc/httpd/conf.d/ctrlpanel.conf\n"})}),(0,t.jsxs)(n.p,{children:["There, you want to paste in the configuration which is stated below. Be sure to change any ",(0,t.jsx)(n.code,{children:"YOUR.DOMAIN.HERE"})," placeholders with your Ctrlpanel setup."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-conf",children:'<VirtualHost *:80>\n     # Replace YOUR.DOMAIN.HERE with your domain.\n     ServerName YOUR.DOMAIN.HERE\n \n     RewriteEngine On\n     RewriteCond %{HTTPS} !=on\n     RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L] \n </VirtualHost>\n \n <VirtualHost *:443>\n     # Replace YOUR.DOMAIN.HERE with your domain.\n     ServerName YOUR.DOMAIN.HERE\n     DocumentRoot "/var/www/ctrlpanel/public"\n \n     AllowEncodedSlashes On\n \n     php_value upload_max_filesize 100M\n     php_value post_max_size 100M\n \n     <Directory "/var/www/ctrlpanel/public">\n         Require all granted\n         AllowOverride all\n     </Directory>\n \n     SSLEngine on\n     SSLCertificateFile /etc/letsencrypt/live/YOUR.DOMAIN.HERE/fullchain.pem\n     SSLCertificateKeyFile /etc/letsencrypt/live/YOUR.DOMAIN.HERE/privkey.pem\n </VirtualHost> \n'})}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)("font",{size:"5",children:"Enable Configuration"})})}),(0,t.jsxs)(n.p,{children:["Now that we've successfully created the configuration file for our web server, the last step is to restart it. ",(0,t.jsx)(n.strong,{children:"NOTE"})," This step can be skipped if your OS is based off of RHEL, Rocky Linux, or AlmaLinux."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# You do not need to run any of these commands on RHEL, Rocky Linux, or AlmaLinux\nsudo ln -s /etc/apache2/sites-available/ctrlpanel.conf /etc/apache2/sites-enabled/ctrlpanel.conf\nsudo a2enmod rewrite\nsudo a2enmod ssl\nsudo systemctl restart apache2\n"})})]}),(0,t.jsxs)(l.A,{value:"apache-nossl",label:"Apache Without SSL",children:[(0,t.jsx)(n.p,{children:"Before we setup the configuration, we have to delete Apache's default configuration. Run the command below to delete it."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"a2dissite 000-default.conf\n"})}),(0,t.jsx)(n.p,{children:"Once done, we now have to open the NGINX configuration file. This depends on your OS."}),(0,t.jsx)(n.p,{children:"Debian/Ubuntu Based OSes:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nano /etc/apache2/sites-available/ctrlpanel.conf\n"})}),(0,t.jsx)(n.p,{children:"RHEL, CentOS, Rocky Linux, or AlmaLinux based OSes:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nano /etc/httpd/conf.d/ctrlpanel.conf\n"})}),(0,t.jsxs)(n.p,{children:["There, you want to paste in the configuration which is stated below. Be sure to change any ",(0,t.jsx)(n.code,{children:"YOUR.DOMAIN.HERE"})," placeholders with your Ctrlpanel setup."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-conf",children:'<VirtualHost *:80>\n    # Replace YOUR.DOMAIN.HERE with your domain.\n    ServerName YOUR.DOMAIN.HERE\n    DocumentRoot "/var/www/ctrlpanel/public"\n    \n    AllowEncodedSlashes On\n    \n    php_value upload_max_filesize 100M\n    php_value post_max_size 100M\n    \n    <Directory "/var/www/ctrlpanel/public">\n        AllowOverride all\n        Require all granted\n    </Directory>\n</VirtualHost>\n'})}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)("font",{size:"5",children:"Enable Configuration"})})}),(0,t.jsxs)(n.p,{children:["Now that we've successfully created the configuration file for our web server, the last step is to restart it. ",(0,t.jsx)(n.strong,{children:"NOTE"})," This step can be skipped if your OS is based off of RHEL, Rocky Linux, or AlmaLinux."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# You do not need to run any of these commands on RHEL, Rocky Linux, or AlmaLinux\nsudo ln -s /etc/apache2/sites-available/ctrlpanel.conf /etc/apache2/sites-enabled/ctrlpanel.conf\nsudo a2enmod rewrite\nsudo systemctl restart apache2\n"})})]})]}),"\n",(0,t.jsx)(n.h3,{id:"set-permissions",children:"Set Permissions"}),"\n",(0,t.jsx)(n.p,{children:"The last step in the installation process is to set the correct permissions on the Panel files so that the web server can\nuse them correctly."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# If using NGINX or Apache (not on CentOS):\nchown -R www-data:www-data /var/www/ctrlpanel/\nchmod -R 755 storage/* bootstrap/cache/\n\n# If using NGINX on CentOS:\nchown -R nginx:nginx /var/www/ctrlpanel/\nchmod -R 755 storage/* bootstrap/cache/\n\n# If using Apache on CentOS\nchown -R apache:apache /var/www/ctrlpanel/\nchmod -R 755 storage/* bootstrap/cache/\n\n****\n"})}),"\n",(0,t.jsx)(n.p,{children:"Once this is done, you should be able to access the dashboard via your web browser."}),"\n",(0,t.jsx)(n.h2,{id:"queue-listeners",children:"Queue Listeners"}),"\n",(0,t.jsx)(n.h3,{id:"crontab-configuration",children:"Crontab Configuration"}),"\n",(0,t.jsx)(n.p,{children:"The first thing we need to do is create a new cron job that runs every minute to process specific Dashboard tasks such as billing users hourly and suspending unpaid servers. To setup crontab, we first have to open it. To do so, run the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"crontab -e\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If it prompts you for a file editor, choose number 1. Once It's opened, go to a line that doesn't have a ",(0,t.jsx)(n.code,{children:"#"})," in front of it. Then paste in this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"* * * * * php /var/www/ctrlpanel/artisan schedule:run >> /dev/null 2>&1\n"})}),"\n",(0,t.jsx)(n.h3,{id:"create-queue-worker",children:"Create Queue Worker"}),"\n",(0,t.jsx)(n.p,{children:"Next, you need to create a new systemd worker to keep our queue process running in the background. This queue is responsible for sending emails and handling many other background tasks for the Dashboard."}),"\n",(0,t.jsxs)(n.p,{children:["Create a file called ",(0,t.jsx)(n.code,{children:"ctrlpanel.service"})," in ",(0,t.jsx)(n.code,{children:"/etc/systemd/system"})," with the contents below."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Ctrlpanel Queue Worker File\n# ----------------------------------\n\n[Unit]\nDescription=Ctrlpanel Queue Worker\n\n[Service]\n# On some systems the user and group might be different.\n# Some systems use `apache` or `nginx` as the user and group.\nUser=www-data\nGroup=www-data\nRestart=always\nExecStart=/usr/bin/php /var/www/ctrlpanel/artisan queue:work --sleep=3 --tries=3\nStartLimitBurst=0\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,t.jsx)(n.p,{children:"Finally, enable the service and set it to boot on machine start."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl enable --now ctrlpanel.service\n"})}),"\n",(0,t.jsx)(n.h4,{id:"navigate-to-the-installer",children:"Navigate to the installer"}),"\n",(0,t.jsxs)(n.p,{children:["To begin installation, go to ",(0,t.jsx)(n.code,{children:"https://YOUR_DOMAIN_HERE.com/installer"})," and follow the installer instructions."]}),"\n",(0,t.jsx)(n.p,{children:"If you encounter problems with the email setup, you can skip it and set it up later."}),"\n",(0,t.jsx)(n.p,{children:"Once the installer has been completed, you will be redirected to the login page. Sign in with your Pterodactyl username/email and the password you set during the installer."})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}}}]);